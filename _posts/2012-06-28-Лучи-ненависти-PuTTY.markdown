---
layout: post
category : test
comments : true
tags : [git, ssh, putty]
---
{% include JB/setup %}

Вчера убил битый час на удалённую помощь коллеге, который не мог подключиться к нашему git-серверу. Бедняга работает под Windows и имел неосторожность поставить себе на машину PuTTY. Как результат, он всё никак не мог запушить к нам свою ветку.

Сначала мы думали, что проблема в создаваемых PuTTY ключах. Известный факт: его формат ключей несовместим с OpenSSH. Поэтому мы рекомендуем сотрудникам создавать ключи только через `ssh-keygen`. Однако здесь проблема оказалась хитрее. Не работал даже "правильный" ключ, созданный по всем правилам.

Выяснилось, что PuTTY, помимо прочего, [подменяет переменные окружения](http://stackoverflow.com/a/9386222/1044267), которые использует git. И делает большие удивлённые глаза, когда к нему приходит rsa-шный ключ: "я знать не знаю ваш хост, и не буду с ним соединяться". Вот и весь сказ.

В нашем случае помог простой `unset GIT_SSH` в гитовой консоли. Лучшим же решением проблемы будет удаление с компьютера сначала PuTTY, а затем и Windows. Эта операционка, по моему стойкому убеждению, крайне слабо подходит для разработки софта. В отличие от нашего любимого GNU/Linux.

**N.B.**: А ещё надо будет найти время, чтобы [выпилить PuTTY](https://github.com/w31rd0/ServerAccess/issues/6) из [дудки](https://github.com/w31rd0/ServerAccess). Так жизнь станет ещё чуточку приятнее.
